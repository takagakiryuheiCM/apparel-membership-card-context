# [FE] 会員情報入力画面

## 目的
ユーザーがLINEミニアプリを利用するために必要な会員情報を入力・登録できる画面を提供する。

## UI（Figma）
- Figma: 会員情報入力画面
- 説明: 会員情報を登録する入力フォーム画面

## 画面仕様

### 画面タイトル
- 画面タイトル: 「新規会員の登録」

### 画面構成
本機能は以下の画面で構成される。
1. 会員情報入力フォーム
2. 登録確認画面
3. 登録完了画面

### 入力項目
| 項目名 | 入力形式 | 必須 | プレースホルダ/初期値 |
|--------|----------|:----:|----------------------|
| 姓 | テキスト | ○ | 山田 |
| 名 | テキスト | ○ | 太郎 |
| せい | テキスト | ○ | やまだ |
| めい | テキスト | ○ | たろう |
| 郵便番号（上3桁） | テキスト | ○ | 000 |
| 郵便番号（下4桁） | テキスト | ○ | 0000 |
| 都道府県 | セレクトボックス | ○ | 選択してください |
| 市区町村 | テキスト | ○ | 市区町村 |
| それ以降の住所 | テキスト | ○ | 番地 |
| 建物名・部屋番号 | テキスト | - | 建物名・部屋番号 |
| 電話番号 | テキスト | ○ | 09012345678 |
| 生年月日 | 日付ピッカー | ○ | 1990/01/01 |
| 性別 | セレクトボックス | ○ | 選択してください |

### バリデーション（フロントエンド）
| 項目名 | バリデーションルール |
|--------|----------------------|
| 姓 | 必須、64文字以下 |
| 名 | 必須、64文字以下 |
| せい | 必須、64文字以下、ひらがなのみ |
| めい | 必須、64文字以下、ひらがなのみ |
| 郵便番号（上3桁） | 必須、半角数字3桁 |
| 郵便番号（下4桁） | 必須、半角数字4桁 |
| 都道府県 | 必須、いずれかを選択 |
| 市区町村 | 必須、30文字以下 |
| それ以降の住所 | 必須、40文字以下 |
| 建物名・部屋番号 | 40文字以下 |
| 電話番号 | 必須、半角数字10-11桁、0から始まる |
| 生年月日 | 必須、過去日付 |
| 性別 | 必須、いずれかを選択 |

### エラー表示
- バリデーションエラー時、該当項目の下にエラーメッセージを表示する
- エラーがある場合、「登録内容を確認する」ボタンは非活性にする

### 操作
- 「登録内容を確認する」ボタン: 確認画面へ遷移
- 「×」ボタン（ヘッダー右上）: 登録をキャンセルして前画面へ戻る

### 状態（State）
- **初期表示**: 空のフォームを表示
- **ローディング**: API送信中はローディング表示
- **エラー**: エラーダイアログを表示し、リトライ導線を提供

## API連携（FE観点）

### 会員情報登録API
- エンドポイント: `POST /api/users`
- タイミング: 確認画面で「登録する」ボタン押下時
- 成功時: 登録完了画面へ遷移
- 失敗時:
  - 400（バリデーションエラー）: エラー詳細を表示
  - 409（既に登録済み）: エラーダイアログを表示し、トップへ誘導
  - 5xx: エラーダイアログを表示し、リトライ導線を提供

## 関連ドキュメント
- [DB設計（wiki）](https://github.com/takagakiryuheiCM/apparel-membership-card/wiki/DB設計)
- [API設計（wiki）](https://github.com/takagakiryuheiCM/apparel-membership-card/wiki/API設計)

## タスク
- [ ] 入力フォーム画面のレイアウト実装
- [ ] 各入力項目のコンポーネント実装
  - [ ] 姓名入力フィールド
  - [ ] ふりがな入力フィールド
  - [ ] 郵便番号入力フィールド
  - [ ] 住所入力フィールド
  - [ ] 電話番号入力フィールド
  - [ ] 生年月日ピッカー
  - [ ] 性別セレクトボックス
- [ ] フロントエンドバリデーション実装
- [ ] エラー表示の実装
- [ ] 確認画面の実装
- [ ] 登録完了画面の実装
- [ ] 会員情報登録API連携
- [ ] ローディング/エラー表示
- [ ] Storybookファイル作成
- [ ] ルーティング設定
- [ ] テスト実装

## テストケース

### 表示/基本動作
- [ ] 会員情報入力フォームが表示される
- [ ] 画面タイトルが「新規会員の登録」と表示される
- [ ] 全ての入力項目が表示され、入力できる
- [ ] 必須項目には「必須」バッジが表示される

### バリデーション
- [ ] 必須項目が未入力の場合、エラーメッセージが表示される
- [ ] 文字数オーバーの場合、エラーメッセージが表示される
- [ ] 不正な文字種の場合、エラーメッセージが表示される
- [ ] 電話番号の形式が不正な場合、エラーメッセージが表示される
- [ ] エラーがある場合、「登録内容を確認する」ボタンが非活性になる
- [ ] 全て正しく入力すると、「登録内容を確認する」ボタンが活性になる

### 確認画面
- [ ] 入力内容が一覧表示される
- [ ] 「戻る」ボタンで入力フォームへ戻れる（入力内容保持）
- [ ] 「登録する」ボタンで登録APIが呼び出される

### 登録完了
- [ ] 登録成功時、登録完了画面が表示される
- [ ] 「トップページへ」ボタンでトップページへ遷移する

### 例外/状態
- [ ] API送信中にローディング表示が出る
- [ ] APIエラー時にエラーダイアログが表示され、リトライできる
- [ ] 既に登録済みの場合、エラーダイアログが表示される

## 完了条件
- [ ] タスクが全て完了していること
- [ ] 上記テストケースが満たされること
- [ ] レビューが承認されていること

## Blocked by
- [ ] 会員情報登録APIの実装完了（#6）
- [ ] Figmaデザインの最終確定
