# [PBI] 会員情報が登録できる

## 概要（仕様サマリー）
LINEミニアプリを利用するために必要な会員情報を登録できるようにする。
ユーザーは**会員情報入力フォーム**から氏名・住所・電話番号・生年月日・性別などの基本情報を入力し、登録を完了する。
登録された情報は、各店舗での会員証発行（本会員アクティベート）時にPOS様システムへ連携される。

## 背景 / 目的
- 会員証LINEミニアプリを利用するには、まずユーザーの基本情報を登録する必要があるため
- 正確なユーザー情報を収集し、各店舗での会員証発行に必要な情報を確保するため
- ユーザーの入力負担を軽減し、登録完了率を向上させるため

## 仕様

### 基本情報（登録項目）
| 項目名 | 必須 | 形式 | バリデーションルール | 備考 |
|--------|:----:|------|----------------------|------|
| 姓 | ○ | テキスト | 64文字以下 | |
| 名 | ○ | テキスト | 64文字以下 | |
| せい | ○ | ひらがな | 64文字以下、ひらがなのみ | |
| めい | ○ | ひらがな | 64文字以下、ひらがなのみ | |
| 生年月日 | ○ | 日付 | YYYYMMDD形式、過去日付のみ | 本人確認に使用 |
| 性別 | ○ | 選択 | 0（男性） / 1（女性） | |
| 郵便番号（上3桁） | ○ | 数字 | 半角数字3桁 | |
| 郵便番号（下4桁） | ○ | 数字 | 半角数字4桁 | |
| 都道府県 | ○ | 選択 | 都道府県コード（JIS X 0401準拠） | |
| 市区町村 | ○ | テキスト | 30文字以下 | |
| それ以降の住所 | ○ | テキスト | 40文字以下 | |
| 建物名・部屋番号 | - | テキスト | 40文字以下 | 任意項目 |
| 電話番号 | ○ | 数字 | 半角数字10〜11桁、0から始まる | |

### 処理フロー
1. 会員情報入力フォームを表示
2. 各項目を入力（手動入力）
3. 入力内容のバリデーション
4. 確認画面で内容を確認
5. 登録処理を実行
6. 登録完了画面を表示

### 画面遷移
- 会員情報登録完了後 → トップページ（店舗一覧）へ遷移

## タスク（Sub-issues）
- [ ] #6 [BE] 会員情報登録API
- [ ] #7 [FE] 会員情報入力画面

## 受入条件（Acceptance Criteria）
- [ ] 会員情報入力フォームが表示され、必須項目が入力できること
- [ ] 各項目の入力バリデーションが適切に機能すること
- [ ] バリデーションエラー時、エラー内容が分かるメッセージが表示されること
- [ ] 生年月日が入力でき、YYYYMMDD形式で保存されること
- [ ] 性別がセレクトボックスから選択できること
- [ ] 登録完了後、トップページへ遷移できること

## 参照（根拠/関連ドキュメント）
- [DB設計](https://github.com/takagakiryuheiCM/apparel-membership-card/wiki/DB設計) - Usersテーブルの項目定義
- [会員情報項目一覧](共有資料/要件整理/会員情報項目一覧.md)
- [会員情報項目の整理](Backlog/issues/2025/会員情報項目の整理.md)
