# [PBI] 退会できる

## 概要（仕様サマリー）
ユーザーが会員証サービスから退会できる機能を提供する。
退会処理により、すべての会員証が無効化され、ユーザー情報が論理削除される。

## 背景 / 目的
- ユーザーがサービスの利用を終了したい場合、退会できる必要があるため
- 個人情報保護の観点から、ユーザー自身でデータ削除をリクエストできるようにするため
- GDPRやプライバシー規制への対応として退会機能が必要なため

## 仕様

### 退会処理
| 処理 | 説明 |
|------|------|
| 会員証無効化 | すべての会員証のステータスをinactiveに更新 |
| ユーザー情報論理削除 | withdrawnAtに退会日時を設定 |
| データ保持期間 | 退会後30日間はデータを保持（問い合わせ対応用） |

### 処理フロー
1. マイページから「退会する」ボタンを押下
2. 退会確認画面を表示
3. 確認後、退会処理を実行
4. すべての会員証を無効化
5. ユーザー情報を論理削除
6. 退会完了画面を表示

### 画面遷移
- マイページ → 退会確認画面 → 退会完了画面

## 受入条件（Acceptance Criteria）
- [ ] マイページから退会ボタンを押せること
- [ ] 退会確認画面が表示されること
- [ ] 確認後、すべての会員証が無効化されること
- [ ] ユーザー情報が論理削除されること
- [ ] 退会完了画面が表示されること

## 参照（根拠/関連ドキュメント）
- [DB設計](https://github.com/takagakiryuheiCM/apparel-membership-card/wiki/DB設計) - 論理削除の仕様
- [API設計](https://github.com/takagakiryuheiCM/apparel-membership-card/wiki/API設計)

## 備考
- 退会後30日間はデータを保持（問い合わせ対応用）
- 30日後に物理削除するバッチは第二フェーズで検討
