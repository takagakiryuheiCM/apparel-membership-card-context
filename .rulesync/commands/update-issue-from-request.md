---
description: 作業完了後にIssueを実装内容に合わせて更新・詳細化
---
# Update Issue from Request

作業内容（コミット・PR作成または、単純にローカルの変更のみ）後に、Issueの内容と実際の実装内容を比較し、乖離がある場合にIssueを更新してより詳細なドキュメントにします。

**対象Issue番号**: `$ARGUMENTS`

## 実行手順

### Phase 1: 情報収集

1. **対象Issue番号の確認**
   - `$ARGUMENTS` でIssue番号が指定されている場合はそれを使用
   - 指定がない場合は、ブランチ名（`feature/#123-xxx` 形式）から取得、または `gh issue list` で一覧を表示してユーザーに確認
2. **Issueの現在の内容を確認**: `gh issue view [issue番号]`
3. **PRの内容を確認**: `gh pr view` で作成したPRの内容を確認
4. **PRがない場合は、作業を振り返り、必要に応じてコミットログやdiffを確認**

### Phase 2: 乖離の分析
Issueの記載内容と実際の実装内容を比較し、乖離がある場合にIssueを更新してより詳細なドキュメントにします。

### Phase 3: Issue更新案の作成

乖離がある場合、以下の観点でIssueを詳細化する更新案を作成：

- **実装した内容の詳細**: Issueには記載されていない内容や、具体的な実装内容の詳細。

- **関連PR**: 作成したPRへのリンク

### Phase 4: ユーザー確認と更新実行

1. **更新案をユーザーに提示**: 変更前後の差分がわかるように説明
2. **承認を得てから更新**: `gh issue edit [issue番号] --body "更新後の本文"`
3. **更新完了の確認**: `gh issue view [issue番号]` で反映を確認

## 重要な制約

- Issueの内容は**日本語**で記載
- AIの署名は**追加しない**
- **既存の内容を大幅に変更する場合は、必ずユーザーに確認を取ってから実行**
- ghコマンドが使用できない場合は、`gh`コマンドの有無の確認と`gh auth login`コマンドの実行を促す
- 想定外の作業が発生したり、エラーが見つかった場合はユーザーに相談
